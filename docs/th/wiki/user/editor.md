# ตัวแก้ไขในเกม

CraftMenu มีตัวแก้ไขภาพที่ทรงพลังซึ่งช่วยให้คุณกำหนดค่าเมนูได้โดยตรงผ่าน GUI ของคลังไอเทม โดยไม่ต้องแก้ไขไฟล์ YAML ด้วยตนเอง

## เริ่มต้นใช้งาน

### การเปิดตัวแก้ไข

```
/cm kaekhai              # เปิดหน้าหลักตัวแก้ไข
/cm kaekhai <menu>       # แก้ไขเมนูเฉพาะโดยตรง
```

**สิทธิ์ที่ต้องการ:** `craftmenu.admin` หรือ `craftmenu.edit`

### การนำทางตัวแก้ไข

ตัวแก้ไขใช้ระบบ **การนำทางแบบสแตก**:
- **คลิกซ้าย** บนไอเทมเพื่อเข้าสู่เมนูย่อยหรือแก้ไขค่า
- **คลิกขวา** สำหรับการดำเนินการรอง (ดูตัวอย่าง, ทดสอบ)
- **Shift + คลิกซ้าย** เพื่อลบไอเทม (พร้อมการยืนยัน)
- **ไอเทมลูกศร** (ปุ่มย้อนกลับ) เพื่อกลับไปยังเมนูก่อนหน้า
- **ปิดคลังไอเทม** หรือคลิกด้านนอกเพื่อออก

---

## เมนูหลักตัวแก้ไข

เมื่อคุณรันคำสั่ง `/cm kaekhai` คุณจะเห็นหน้าหลักตัวแก้ไขพร้อมตัวเลือกเหล่านี้:

| ไอเทม | คำอธิบาย |
|------|-------------|
| **รายการเมนู** | เรียกดูและแก้ไขเมนูที่โหลดทั้งหมด |
| **เบราว์เซอร์รูปภาพ** | ดูรูปภาพทั้งหมดที่มีอยู่ |
| **เบราว์เซอร์เสียง** | ดูเสียงทั้งหมดที่มีอยู่ |
| **การตั้งค่า** | การกำหนดค่าปลั๊กอินทั่วไป |

---

## การแก้ไขเมนู

### รายการเมนู

แสดงเมนูทั้งหมดในโฟลเดอร์ `menus/` ของคุณ คลิกเมนูเพื่อเปิดตัวแก้ไข

- **คลิกซ้าย**: แก้ไขเมนู
- **Shift + คลิกซ้าย**: ลบเมนู (พร้อมการยืนยัน)
- **สร้างใหม่**: เพิ่มเมนูใหม่ที่ตำแหน่งปัจจุบันของคุณ

### ศูนย์การดำเนินการเมนู

หลังจากเลือกเมนู คุณจะเห็นตัวแก้ไขเมนูหลักพร้อมส่วนต่างๆ เหล่านี้:

| ส่วน | คำอธิบาย |
|---------|-------------|
| **คุณสมบัติ** | การตั้งค่าพื้นฐาน (ชื่อ, หัวข้อ, เมนูหลัก, เปิดอัตโนมัติ) |
| **ตำแหน่ง** | ตำแหน่งและการหมุนในโลก |
| **เลย์เอาต์** | การกำหนดค่าเลย์เอาต์กริด |
| **ปุ่มลัด** | ปุ่มลัดคีย์บอร์ด |
| **การมองเห็น** | การตั้งค่าซ่อนผู้เล่น/ม็อบ/ไอเทม |
| **ขั้นสูง** | ความไวเคอร์เซอร์, ล็อคกล้อง, ขอบเขต |
| **วิดเจ็ต** | แก้ไขวิดเจ็ตในเมนูนี้ |

---

## คุณสมบัติเมนู

แก้ไขข้อมูลพื้นฐานของเมนู:

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **ชื่อ** | ตัวระบุเมนู (ใช้ในคำสั่ง) |
| **หัวข้อ** | หัวข้อแสดงผล (รองรับโค้ดสี &) |
| **คำอธิบาย** | คำอธิบายเพิ่มเติม |
| **เมนูหลัก** | ทำเครื่องหมายเป็นเมนูหลัก |
| **เปิดเมื่อเข้าร่วม** | เปิดอัตโนมัติเมื่อผู้เล่นเข้าร่วมเซิร์ฟเวอร์ |
| **เปิดเมื่อเทเลพอร์ต** | เปิดอัตโนมัติเมื่อผู้เล่นเทเลพอร์ตมายังโลกนี้ |
| **โลก** | โลกที่เมนูมีอยู่ |

### การแก้ไขค่าข้อความ

เมื่อคุณคลิกที่คุณสมบัติข้อความ:
1. คลังไอเทมจะปิด
2. ข้อความแจ้งจะปรากฏในแชท
3. พิมพ์ค่าใหม่ของคุณในแชท
4. กด Enter เพื่อยืนยัน (หรือพิมพ์ `cancel` เพื่อยกเลิก)

---

## ตำแหน่งเมนู

กำหนดค่าว่าเมนูจะปรากฏที่ไหนในโลก:

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **โลก** | เลือกจากโลกที่มีอยู่ |
| **X / Y / Z** | พิกัด (คลิกเพื่อแก้ไขผ่านแชท) |
| **Yaw** | การหมุนแนวนอน (-180 ถึง 180) |
| **Pitch** | การหมุนแนวตั้ง (-90 ถึง 90) |
| **ตั้งค่าเป็นปัจจุบัน** | ใช้ตำแหน่ง/การหมุนปัจจุบันของคุณ |

---

## เลย์เอาต์เมนู (กริด)

กำหนดค่าการจัดตำแหน่งวิดเจ็ตแบบกริด:

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **เปิดใช้งาน** | สลับเปิด/ปิดเลย์เอาต์กริด |
| **คอลัมน์** | จำนวนคอลัมน์กริด |
| **แถว** | จำนวนแถวกริด |
| **ช่องว่าง X / Y / Z** | ระยะห่างระหว่างเซลล์ |
| **การจัดตำแหน่ง** | การจัดตำแหน่งกริด (CENTER, TOP_LEFT, ฯลฯ) |

เมื่อเปิดใช้งานเลย์เอาต์กริด วิดเจ็ตจะใช้ `grid-position: {row: X, col: Y}` แทนพิกัดที่กำหนดเอง

---

## ปุ่มลัดเมนู

กำหนดค่าปุ่มลัดคีย์บอร์ด:

| การดำเนินการ | คำอธิบาย |
|--------|-------------|
| **เพิ่มปุ่มลัด** | สร้างปุ่มลัดคีย์บอร์ดใหม่ |
| **แก้ไขปุ่มลัด** | แก้ไขปุ่มลัดที่มีอยู่ |
| **ลบปุ่มลัด** | ลบปุ่มลัด |

### คุณสมบัติปุ่มลัด

- **ปุ่ม**: ปุ่มหรือการรวมกัน (เช่น `SHIFT`, `CTRL+E`, `F`)
- **การดำเนินการ**: `activate`, `toggle`, หรือ `close`
- **วิดเจ็ต**: ชื่อวิดเจ็ตเป้าหมาย (สำหรับ activate/toggle)

---

## การมองเห็นเมนู

ควบคุมสิ่งที่มองเห็นได้ขณะเมนูเปิดอยู่:

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **ซ่อนผู้เล่น** | ซ่อนผู้เล่นอื่นจากมุมมอง |
| **ซ่อนม็อบ** | ซ่อนม็อบทั้งหมด |
| **ซ่อนไอเทม** | ซ่อนไอเทมบนพื้น |
| **รายการที่อนุญาต** | ผู้เล่นที่ยังคงมองเห็นได้ (แก้ไขรายการ) |

---

## การตั้งค่าขั้นสูง

ปรับแต่งพฤติกรรมเมนูอย่างละเอียด:

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **ความไวเคอร์เซอร์** | ความเร็วการเคลื่อนที่ของเมาส์ (0.1 - 5.0) |
| **ออฟเซ็ต Yaw สูงสุด** | ขอบเขตเคอร์เซอร์แนวนอน (องศา) |
| **ออฟเซ็ต Pitch สูงสุด** | ขอบเขตเคอร์เซอร์แนวตั้ง (องศา) |
| **เปิดใช้งานล็อคกล้อง** | ล็อคกล้องของผู้เล่นขณะเมนูเปิดอยู่ |
| **ความแรงล็อคกล้อง** | ความแรงในการล็อคกล้อง (0.0 - 1.0) |
| **เสียงขอบเขต** | เสียงเมื่อเคอร์เซอร์ชนขอบเขต |
| **ระดับเสียง/ระดับเสียงสูงของขอบเขต** | คุณสมบัติเสียง |
| **ข้อความขอบเขต** | ข้อความที่แสดงที่ขอบเขต |

---

## การแก้ไขวิดเจ็ต

### รายการวิดเจ็ต

แสดงวิดเจ็ตทั้งหมดในเมนูปัจจุบัน:

- **คลิกซ้าย**: แก้ไขวิดเจ็ต
- **Shift + คลิกซ้าย**: ลบวิดเจ็ต
- **สร้างใหม่**: เพิ่มวิดเจ็ตใหม่

### ศูนย์ตัวแก้ไขวิดเจ็ต

แต่ละวิดเจ็ตมีส่วนที่แก้ไขได้เหล่านี้:

| ส่วน | คำอธิบาย |
|---------|-------------|
| **ประเภท** | IMAGE, TEXT, หรือ CURSOR |
| **ทรานส์ฟอร์ม** | ตำแหน่ง, ขนาด, การหมุน |
| **สถานะภาพ** | ลักษณะปกติ, โฮเวอร์, กด, ปิดใช้งาน |
| **การชน** | การกำหนดค่ากล่องชน |
| **เหตุการณ์** | เหตุการณ์และการดำเนินการโต้ตอบ |
| **[เฉพาะประเภท]** | ตัวเลือกเพิ่มเติมตามประเภทวิดเจ็ต |

---

## ตัวแก้ไขทรานส์ฟอร์ม

กำหนดค่าตำแหน่งและขนาดวิดเจ็ต:

### ตำแหน่ง
- **X**: ตำแหน่งแนวนอน
- **Y**: ตำแหน่งแนวตั้ง
- **Z**: ตำแหน่งความลึก

### ขนาด
- **X**: สเกลความกว้าง
- **Y**: สเกลความสูง
- **Z**: สเกลความลึก

### การหมุน
- **Pitch**: การหมุนขึ้น/ลง
- **Yaw**: การหมุนซ้าย/ขวา
- **Roll**: การหมุนเอียง

**เคล็ดลับ**: คลิกที่ค่าใดๆ เพื่อแก้ไขผ่านการป้อนข้อมูลในแชท

---

## สถานะภาพ

วิดเจ็ตสามารถมีลักษณะที่แตกต่างกันสำหรับสถานะต่างๆ:

| สถานะ | เมื่อใช้งาน |
|-------|--------------|
| **normal** | สถานะเริ่มต้น |
| **hover** | เคอร์เซอร์อยู่เหนือวิดเจ็ต |
| **pressed** | วิดเจ็ตกำลังถูกคลิก |
| **disabled** | วิดเจ็ตไม่ได้ใช้งาน |
| **กำหนดเอง** | ชื่อสถานะที่กำหนดเอง |

### ตัวแก้ไขสถานะภาพ

แต่ละสถานะมี:

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **ประเภท** | `image`, `text`, หรือ `unicode` |
| **ค่า** | พาธรูปภาพ, เนื้อหาข้อความ, หรืออักขระยูนิโค้ด |
| **การแทนที่** | การแทนที่ทรานส์ฟอร์ม/การชน/ขนาดข้อความเพิ่มเติม |

---

## ตัวแก้ไขการชน

กำหนดค่าพื้นที่ที่คลิกได้ของวิดเจ็ต:

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **เปิดใช้งาน** | สลับการตรวจจับการชน |
| **ตำแหน่ง X/Y/Z** | ออฟเซ็ตจุดศูนย์กลางกล่องชน |
| **ขนาด X/Y/Z** | ขนาดกล่องชน |
| **ออฟเซ็ต X/Y/Z** | ออฟเซ็ตเพิ่มเติม |

**เคล็ดลับ**: ใช้ `/cm debug particles` เพื่อแสดงกล่องชนในเกม

---

## ตัวแก้ไขเหตุการณ์

### ประเภทเหตุการณ์

| เหตุการณ์ | ทริกเกอร์ |
|-------|---------|
| **on_menu_open** | เมื่อเมนูเปิด |
| **on_cursor_hover** | เมื่อเคอร์เซอร์เข้าสู่วิดเจ็ต |
| **on_cursor_hover_exit** | เมื่อเคอร์เซอร์ออกจากวิดเจ็ต |
| **on_cursor_click** | เมื่อวิดเจ็ตถูกคลิก |

### รายการการดำเนินการ

แต่ละเหตุการณ์มีรายการการดำเนินการที่ทำงานตามลำดับ:

- **คลิกซ้าย**: แก้ไขการดำเนินการ
- **Shift + คลิกซ้าย**: ลบการดำเนินการ
- **เพิ่มการดำเนินการ**: สร้างการดำเนินการใหม่
- **จัดลำดับใหม่**: ลากเพื่อเปลี่ยนลำดับการทำงาน

---

## ตัวแก้ไขการดำเนินการ

การดำเนินการแต่ละประเภทมีตัวแก้ไขเฉพาะทาง:

### การดำเนินการแอนิเมชัน

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **เอฟเฟกต์** | ประเภทแอนิเมชัน (rotate, scale, bounce, ฯลฯ) |
| **ระยะเวลา** | ความยาวแอนิเมชันในมิลลิวินาที |
| **สเกล X/Y/Z** | ตัวคูณสเกล (สำหรับแอนิเมชันสเกล) |
| **ความเข้ม** | ความแรงเอฟเฟกต์ (0.1 - 5.0) |
| **การเปลี่ยนผ่าน** | ฟังก์ชันเวลา (linear, ease_in, ease_out, ฯลฯ) |
| **ความสำคัญ** | บล็อกการโต้ตอบระหว่างแอนิเมชัน |

### การดำเนินการเสียง

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **ไฟล์** | พาธเสียง (minecraft:... หรือพาธกำหนดเอง) |
| **ระดับเสียง** | ระดับเสียง (0.0 - 1.0) |
| **ระดับเสียงสูง** | ระดับเสียงสูง (0.5 - 2.0) |

**เรียกดู**: คลิกเพื่อเปิดเบราว์เซอร์เสียงและเลือกเสียง

### การดำเนินการคำสั่ง

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **คำสั่ง** | คำสั่งที่จะทำงาน (พร้อมคำสั่งพิเศษ) |
| **ดีเลย์** | ดีเลย์เป็นมิลลิวินาทีก่อนทำงาน |

**คำสั่งพิเศษ:**
- `[TELEPORT] world x y z yaw pitch`
- `[MESSAGE] &aข้อความของคุณที่นี่`
- `[CLOSE]`
- `[PLAY_MUSIC] path/file.ogg`
- `[STOP_MUSIC]`
- `[OPEN_URL] https://...`
- `[PLAYER] /command`
- `[CONSOLE] /command`

### การดำเนินการสถานะ

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **ประเภทการดำเนินการ** | `toggle_state` หรือ `set_state` |
| **สถานะ** | รายการสถานะที่จะสลับระหว่างกัน (toggle_state) |
| **สถานะ** | ชื่อสถานะเป้าหมาย (set_state) |

### การดำเนินการเปลี่ยนภาพ

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **เป็น** | ชื่อสถานะภาพเป้าหมาย |

### การดำเนินการวิดเจ็ต

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **การดำเนินการ** | `hide_widget`, `show_widget`, ฯลฯ |
| **วิดเจ็ต** | ชื่อวิดเจ็ตเป้าหมาย |

### การดำเนินการเอฟเฟกต์

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **เอฟเฟกต์** | ประเภทเอฟเฟกต์ที่จะใช้ |
| **พารามิเตอร์** | พารามิเตอร์เฉพาะเอฟเฟกต์ |

### การดำเนินการหยุดแอนิเมชัน

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **ประเภทแอนิเมชัน** | แอนิเมชันที่จะหยุด |

### การดำเนินการหยุดเอฟเฟกต์

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **ประเภทเอฟเฟกต์** | เอฟเฟกต์ที่จะหยุด |

### การดำเนินการตั้งค่าสถานะฐาน

| คุณสมบัติ | คำอธิบาย |
|----------|-------------|
| **สถานะ** | สถานะฐานใหม่สำหรับวิดเจ็ต |

---

## เบราว์เซอร์สินทรัพย์

### เบราว์เซอร์รูปภาพ

เรียกดูรูปภาพทั้งหมดในโฟลเดอร์ `images/` ของคุณ:

- **การแบ่งหน้า**: นำทางผ่านหน้าของรูปภาพ
- **ดูตัวอย่าง**: ดูพาธรูปภาพและรายละเอียด
- **เลือก**: คลิกเพื่อใช้ในบริบทปัจจุบัน

รูปภาพจัดระเบียบตามโฟลเดอร์ (เช่น `template/button.png`)

### เบราว์เซอร์เสียง

เรียกดูเสียงทั้งหมดในโฟลเดอร์ `sounds/` ของคุณ รวมถึงเสียงในตัวของ Minecraft:

- **เสียงกำหนดเอง**: ไฟล์ .ogg ของคุณจาก `sounds/`
- **เสียง Minecraft**: เสียงในตัว (minecraft:ui.button.click, ฯลฯ)
- **เลือก**: คลิกเพื่อใช้ในบริบทปัจจุบัน

---

## เคล็ดลับและแนวทางปฏิบัติที่ดีที่สุด

### เคล็ดลับขั้นตอนการทำงาน

1. **เริ่มต้นด้วยคุณสมบัติ**: ตั้งค่าชื่อ, หัวข้อ, และตำแหน่งก่อน
2. **เพิ่มวิดเจ็ต**: สร้างวิดเจ็ตของคุณพร้อมทรานส์ฟอร์มพื้นฐาน
3. **กำหนดค่าภาพ**: ตั้งค่าสถานะปกติและโฮเวอร์
4. **เพิ่มการชน**: เปิดใช้งานและกำหนดขนาดกล่องชน
5. **เพิ่มเหตุการณ์**: กำหนดค่าเสียงโฮเวอร์และการดำเนินการคลิก
6. **ทดสอบบ่อยๆ**: ใช้ `/cm perd <menu>` เพื่อทดสอบการเปลี่ยนแปลง

### ปุ่มลัดคีย์บอร์ด

| ปุ่มลัด | การดำเนินการ |
|----------|--------|
| **Escape** | ปิดตัวแก้ไข |
| **ปุ่มตัวเลข (1-9)** | เลือกช่องด่วน |

### ปัญหาทั่วไป

**การเปลี่ยนแปลงไม่ปรากฏ:**
- รันคำสั่ง `/cm reload` หลังจากทำการเปลี่ยนแปลง
- ตรวจสอบให้แน่ใจว่าคุณคลิก "บันทึก" ในตัวแก้ไข

**การชนไม่ตรวจจับ:**
- ตรวจสอบว่าการชนเปิดใช้งานอยู่
- ตรวจสอบว่าขนาดการชนใหญ่พอ
- ใช้ `/cm debug particles` เพื่อแสดงผล

**รูปภาพไม่แสดง:**
- รันคำสั่ง `/cm pak` เพื่อสร้าง resource pack ใหม่
- ตรวจสอบให้แน่ใจว่ารูปภาพอยู่ในโฟลเดอร์ย่อย (เช่น `images/mymenu/`)
- ใช้ resource pack กับไคลเอนต์

---

## ดูเพิ่มเติม

- [อ้างอิงคำสั่ง](commands.md)
- [การสร้างเมนู](menu-creation.md)
- [ประเภทวิดเจ็ต](widgets.md)
- [ระบบเหตุการณ์](events.md)
- [แอนิเมชัน](animations.md)
