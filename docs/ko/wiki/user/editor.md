# 게임 내 에디터

CraftMenu에는 YAML 파일을 수동으로 편집하지 않고도 인벤토리 GUI를 통해 직접 메뉴를 구성할 수 있는 강력한 비주얼 에디터가 포함되어 있습니다.

## 시작하기

### 에디터 열기

```
/cm pyeonjibgi              # 메인 에디터 허브 열기
/cm pyeonjibgi <menu>       # 특정 메뉴 직접 편집
```

**필요한 권한:** `craftmenu.admin` 또는 `craftmenu.edit`

### 에디터 내비게이션

에디터는 **스택 기반 내비게이션** 시스템을 사용합니다:
- **왼쪽 클릭**으로 하위 메뉴 진입 또는 값 편집
- **오른쪽 클릭**으로 보조 작업 (미리보기, 테스트)
- **Shift + 왼쪽 클릭**으로 항목 삭제 (확인 필요)
- **화살표 아이템** (뒤로 버튼)으로 이전 메뉴로 돌아가기
- **인벤토리 닫기** 또는 바깥 클릭으로 종료

---

## 에디터 메인 메뉴

`/cm pyeonjibgi`를 실행하면 다음 옵션이 있는 메인 에디터 허브가 표시됩니다:

| 항목 | 설명 |
|-----|------|
| **메뉴 목록** | 로드된 모든 메뉴 탐색 및 편집 |
| **이미지 브라우저** | 사용 가능한 모든 이미지 보기 |
| **사운드 브라우저** | 사용 가능한 모든 사운드 보기 |
| **설정** | 글로벌 플러그인 설정 |

---

## 메뉴 편집

### 메뉴 목록

`menus/` 폴더의 모든 메뉴를 표시합니다. 메뉴를 클릭하여 에디터를 엽니다.

- **왼쪽 클릭**: 메뉴 편집
- **Shift + 왼쪽 클릭**: 메뉴 삭제 (확인 필요)
- **새로 만들기**: 현재 위치에 새 메뉴 추가

### 메뉴 작업 허브

메뉴를 선택하면 다음 섹션이 있는 메인 메뉴 에디터가 표시됩니다:

| 섹션 | 설명 |
|-----|------|
| **속성** | 기본 설정 (이름, 제목, 메인 메뉴, 자동 열기) |
| **위치** | 월드 위치 및 회전 |
| **레이아웃** | 그리드 레이아웃 설정 |
| **키바인드** | 키보드 단축키 |
| **가시성** | 플레이어/몹/아이템 숨김 설정 |
| **고급** | 커서 감도, 카메라 잠금, 경계 |
| **위젯** | 이 메뉴의 위젯 편집 |

---

## 메뉴 속성

기본 메뉴 정보 편집:

| 속성 | 설명 |
|-----|------|
| **이름** | 메뉴 식별자 (명령어에서 사용) |
| **제목** | 표시 제목 (& 색상 코드 지원) |
| **설명** | 선택적 설명 |
| **메인 메뉴** | 기본 메뉴로 표시 |
| **접속 시 열기** | 플레이어가 서버에 접속하면 자동 열기 |
| **텔레포트 시 열기** | 플레이어가 이 월드로 텔레포트하면 자동 열기 |
| **월드** | 메뉴가 존재하는 월드 |

### 텍스트 값 편집

텍스트 속성을 클릭하면:
1. 인벤토리가 닫힙니다
2. 채팅에 프롬프트가 나타납니다
3. 채팅에 새 값을 입력합니다
4. Enter를 눌러 확인 (또는 `cancel`을 입력하여 취소)

---

## 메뉴 위치

메뉴가 월드에 표시되는 위치 설정:

| 속성 | 설명 |
|-----|------|
| **월드** | 사용 가능한 월드에서 선택 |
| **X / Y / Z** | 좌표 (클릭하여 채팅으로 편집) |
| **Yaw** | 수평 회전 (-180 ~ 180) |
| **Pitch** | 수직 회전 (-90 ~ 90) |
| **현재 위치로 설정** | 현재 위치/회전 사용 |

---

## 메뉴 레이아웃 (그리드)

그리드 기반 위젯 배치 설정:

| 속성 | 설명 |
|-----|------|
| **활성화** | 그리드 레이아웃 켜기/끄기 |
| **열** | 그리드 열 수 |
| **행** | 그리드 행 수 |
| **간격 X / Y / Z** | 셀 간 간격 |
| **정렬** | 그리드 정렬 (CENTER, TOP_LEFT 등) |

그리드 레이아웃이 활성화되면 위젯은 수동 좌표 대신 `grid-position: {row: X, col: Y}`를 사용합니다.

---

## 메뉴 키바인드

키보드 단축키 설정:

| 작업 | 설명 |
|-----|------|
| **키바인드 추가** | 새 키보드 단축키 생성 |
| **키바인드 편집** | 기존 키바인드 수정 |
| **키바인드 삭제** | 키바인드 제거 |

### 키바인드 속성

- **키**: 키 또는 조합 (예: `SHIFT`, `CTRL+E`, `F`)
- **작업**: `activate`, `toggle` 또는 `close`
- **위젯**: 대상 위젯 이름 (activate/toggle용)

---

## 메뉴 가시성

메뉴가 열려 있는 동안 표시되는 항목 제어:

| 속성 | 설명 |
|-----|------|
| **플레이어 숨기기** | 다른 플레이어 숨김 |
| **몹 숨기기** | 모든 몹 숨김 |
| **아이템 숨기기** | 바닥의 아이템 숨김 |
| **화이트리스트** | 계속 표시되는 플레이어 (목록 편집) |

---

## 고급 설정

메뉴 동작 미세 조정:

| 속성 | 설명 |
|-----|------|
| **커서 감도** | 마우스 이동 속도 (0.1 - 5.0) |
| **최대 Yaw 오프셋** | 수평 커서 경계 (도) |
| **최대 Pitch 오프셋** | 수직 커서 경계 (도) |
| **카메라 잠금 활성화** | 메뉴가 열려 있는 동안 플레이어 카메라 잠금 |
| **카메라 잠금 강도** | 카메라 잠금 강도 (0.0 - 1.0) |
| **경계 사운드** | 커서가 경계에 도달했을 때 사운드 |
| **경계 볼륨/피치** | 사운드 속성 |
| **경계 메시지** | 경계에서 표시되는 메시지 |

---

## 위젯 편집

### 위젯 목록

현재 메뉴의 모든 위젯 표시:

- **왼쪽 클릭**: 위젯 편집
- **Shift + 왼쪽 클릭**: 위젯 삭제
- **새로 만들기**: 새 위젯 추가

### 위젯 에디터 허브

각 위젯에는 다음 편집 가능한 섹션이 있습니다:

| 섹션 | 설명 |
|-----|------|
| **타입** | IMAGE, TEXT 또는 CURSOR |
| **트랜스폼** | 위치, 크기, 회전 |
| **비주얼 상태** | 일반, 호버, 눌림, 비활성화 외관 |
| **충돌** | 충돌 박스 설정 |
| **이벤트** | 상호작용 이벤트 및 작업 |
| **[타입별]** | 위젯 타입에 따른 추가 옵션 |

---

## 트랜스폼 에디터

위젯 위치 및 크기 설정:

### 위치
- **X**: 수평 위치
- **Y**: 수직 위치
- **Z**: 깊이 위치

### 크기
- **X**: 너비 스케일
- **Y**: 높이 스케일
- **Z**: 깊이 스케일

### 회전
- **Pitch**: 상하 회전
- **Yaw**: 좌우 회전
- **Roll**: 기울기 회전

**팁**: 값을 클릭하여 채팅 입력으로 편집할 수 있습니다.

---

## 비주얼 상태

위젯은 다양한 상태에 대해 다른 외관을 가질 수 있습니다:

| 상태 | 적용 시점 |
|-----|----------|
| **normal** | 기본 상태 |
| **hover** | 커서가 위젯 위에 있을 때 |
| **pressed** | 위젯이 클릭되고 있을 때 |
| **disabled** | 위젯이 비활성화 상태일 때 |
| **커스텀** | 사용자 정의 상태 이름 |

### 비주얼 상태 에디터

각 상태에는 다음이 있습니다:

| 속성 | 설명 |
|-----|------|
| **타입** | `image`, `text` 또는 `unicode` |
| **값** | 이미지 경로, 텍스트 내용 또는 유니코드 문자 |
| **오버라이드** | 선택적 트랜스폼/충돌/텍스트 크기 오버라이드 |

---

## 충돌 에디터

위젯의 클릭 가능 영역 설정:

| 속성 | 설명 |
|-----|------|
| **활성화** | 충돌 감지 켜기/끄기 |
| **위치 X/Y/Z** | 충돌 박스 중심 오프셋 |
| **크기 X/Y/Z** | 충돌 박스 크기 |
| **오프셋 X/Y/Z** | 추가 오프셋 |

**팁**: `/cm dibeogeu particles`를 사용하여 게임 내에서 충돌 박스를 시각화할 수 있습니다.

---

## 이벤트 에디터

### 이벤트 타입

| 이벤트 | 트리거 |
|-------|-------|
| **on_menu_open** | 메뉴가 열릴 때 |
| **on_cursor_hover** | 커서가 위젯에 진입할 때 |
| **on_cursor_hover_exit** | 커서가 위젯을 벗어날 때 |
| **on_cursor_click** | 위젯이 클릭될 때 |

### 작업 목록

각 이벤트에는 순서대로 실행되는 작업 목록이 포함됩니다:

- **왼쪽 클릭**: 작업 편집
- **Shift + 왼쪽 클릭**: 작업 삭제
- **작업 추가**: 새 작업 생성
- **재정렬**: 드래그하여 실행 순서 변경

---

## 작업 에디터

각 작업 타입에는 전용 에디터가 있습니다:

### 애니메이션 작업

| 속성 | 설명 |
|-----|------|
| **효과** | 애니메이션 타입 (rotate, scale, bounce 등) |
| **지속 시간** | 애니메이션 길이 (밀리초) |
| **스케일 X/Y/Z** | 스케일 배율 (스케일 애니메이션용) |
| **강도** | 효과 강도 (0.1 - 5.0) |
| **이징** | 타이밍 함수 (linear, ease_in, ease_out 등) |
| **우선순위** | 애니메이션 중 상호작용 차단 |

### 사운드 작업

| 속성 | 설명 |
|-----|------|
| **파일** | 사운드 경로 (minecraft:... 또는 사용자 정의 경로) |
| **볼륨** | 사운드 볼륨 (0.0 - 1.0) |
| **피치** | 사운드 피치 (0.5 - 2.0) |

**찾아보기**: 클릭하여 사운드 브라우저를 열고 사운드를 선택합니다.

### 명령어 작업

| 속성 | 설명 |
|-----|------|
| **명령어** | 실행할 명령어 (특수 명령어 포함) |
| **지연** | 실행 전 지연 (밀리초) |

**특수 명령어:**
- `[TELEPORT] world x y z yaw pitch`
- `[MESSAGE] &a여기에 메시지`
- `[CLOSE]`
- `[PLAY_MUSIC] path/file.ogg`
- `[STOP_MUSIC]`
- `[OPEN_URL] https://...`
- `[PLAYER] /command`
- `[CONSOLE] /command`

### 상태 작업

| 속성 | 설명 |
|-----|------|
| **작업 타입** | `toggle_state` 또는 `set_state` |
| **상태들** | 전환할 상태 목록 (toggle_state) |
| **상태** | 대상 상태 이름 (set_state) |

### 비주얼 변경 작업

| 속성 | 설명 |
|-----|------|
| **To** | 대상 비주얼 상태 이름 |

### 위젯 작업

| 속성 | 설명 |
|-----|------|
| **작업** | `hide_widget`, `show_widget` 등 |
| **위젯** | 대상 위젯 이름 |

### 효과 작업

| 속성 | 설명 |
|-----|------|
| **효과** | 적용할 효과 타입 |
| **매개변수** | 효과별 매개변수 |

### 애니메이션 중지 작업

| 속성 | 설명 |
|-----|------|
| **애니메이션 타입** | 중지할 애니메이션 |

### 효과 중지 작업

| 속성 | 설명 |
|-----|------|
| **효과 타입** | 중지할 효과 |

### 기본 상태 설정 작업

| 속성 | 설명 |
|-----|------|
| **상태** | 위젯의 새 기본 상태 |

---

## 에셋 브라우저

### 이미지 브라우저

`images/` 폴더의 모든 이미지 탐색:

- **페이지네이션**: 이미지 페이지 탐색
- **미리보기**: 이미지 경로 및 세부 정보 보기
- **선택**: 클릭하여 현재 컨텍스트에서 사용

이미지는 폴더별로 정리됩니다 (예: `template/button.png`).

### 사운드 브라우저

`sounds/` 폴더의 모든 사운드와 Minecraft 내장 사운드 탐색:

- **사용자 정의 사운드**: `sounds/`의 .ogg 파일
- **Minecraft 사운드**: 내장 사운드 (minecraft:ui.button.click 등)
- **선택**: 클릭하여 현재 컨텍스트에서 사용

---

## 팁 및 모범 사례

### 워크플로우 팁

1. **속성부터 시작**: 먼저 이름, 제목, 위치 설정
2. **위젯 추가**: 기본 트랜스폼으로 위젯 생성
3. **비주얼 설정**: 일반 및 호버 상태 설정
4. **충돌 추가**: 충돌 박스 활성화 및 크기 조정
5. **이벤트 추가**: 호버 사운드 및 클릭 작업 설정
6. **자주 테스트**: `/cm yeolgi <menu>`를 사용하여 변경 사항 테스트

### 키보드 단축키

| 단축키 | 작업 |
|-------|-----|
| **Escape** | 에디터 닫기 |
| **숫자 키 (1-9)** | 빠른 슬롯 선택 |

### 일반적인 문제

**변경 사항이 나타나지 않음:**
- 변경 후 `/cm dasi`를 실행
- 에디터에서 "저장"을 클릭했는지 확인

**충돌이 감지되지 않음:**
- 충돌이 활성화되어 있는지 확인
- 충돌 크기가 충분히 큰지 확인
- `/cm dibeogeu particles`를 사용하여 시각화

**이미지가 표시되지 않음:**
- `/cm paek`를 실행하여 리소스 팩 재생성
- 이미지가 하위 폴더에 있는지 확인 (예: `images/mymenu/`)
- 클라이언트에 리소스 팩 적용

---

## 참고 항목

- [명령어 참조](commands.md)
- [메뉴 만들기](menu-creation.md)
- [위젯 타입](widgets.md)
- [이벤트 시스템](events.md)
- [애니메이션](animations.md)
