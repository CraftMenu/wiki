# トラブルシューティング

CraftMenuの一般的な問題と解決策です。

## 画像が表示されない

**症状：** 画像が「?」または欠落した文字として表示される。

**解決策：**

1. **リソースパックを再生成：**
   ```
   /cm pakku
   ```

2. **画像の場所を確認：**
   - 画像はサブフォルダ内にある必要があります：`plugins/CraftMenu/images/folder/image.png`
   - ルートには配置しない：`plugins/CraftMenu/images/image.png`

3. **画像形式を確認：**
   - PNGファイルのみサポート
   - 正しいファイル拡張子を確認（`.png`、`.PNG`ではない）

4. **リソースパックがロードされているか確認：**
   - サーバーリソースパックが設定されている必要があります
   - プレイヤーがリソースパックを受け入れる必要があります

5. **プラグインをリロード：**
   ```
   /cm saiload
   ```

## メニューが開かない

**症状：** `/cm hiraku`コマンドが何も起こらない。

**解決策：**

1. **メニューが存在するか確認：**
   ```
   /cm risuto
   ```

2. **コマンド実行後にコンソールでエラーを確認**

3. **YAML構文を確認：**
   - YAMLバリデータを使用
   - インデントが正しいか確認

4. **スポーン位置が有効か確認：**
   - ワールドがロードされている必要があります
   - 位置がアクセス可能である必要があります

## コリジョンが機能しない

**症状：** カーソルがウィジェットを検出しない。

**解決策：**

1. **デバッグパーティクルを有効化：**
   ```
   /debugcollision toggle
   ```

2. **コリジョン設定を確認：**
   ```yaml
   collision:
     enabled: true
     size: {x: 0.1, y: 0.1, z: 0.1}
   ```

3. **コリジョンボックスのサイズを大きく**（小さすぎる場合）

4. **ウィジェットの位置を確認** - コリジョンがオフセットしている可能性

## サウンドが再生されない

**症状：** サウンドアクションが効果がない。

**解決策：**

1. **カスタムサウンドの場合：**
   - `.ogg`ファイルを`plugins/CraftMenu/sounds/folder/`に配置
   - リソースパックを再生成：`/cm pakku`

2. **Minecraftサウンドの場合：**
   - 正しい形式を使用：`minecraft:ui.button.click`

3. **アクション設定でボリューム設定を確認**

## パフォーマンスの問題

**症状：** メニュー使用時にラグが発生。

**解決策：**

1. **画像を最適化：**
   ```
   /cm gazou scan
   /cm gazou fix --backup
   ```

2. **複雑なメニューでのアニメーション頻度を下げる**

3. **デバッグモードを無効化：**
   ```yaml
   craftmenu:
     general:
       debug: false
   ```

4. **更新間隔を増やす：**
   ```yaml
   craftmenu:
     performance:
       update-interval: 2
   ```

## プラグインがロードされない

**症状：** 起動時にプラグインがエラーを表示。

**解決策：**

1. **Javaバージョンを確認：**
   - Java 17以上が必要

2. **依存関係を確認：**
   - PacketEventsがインストールされている必要があります

3. **サーバーバージョンを確認：**
   - Minecraft 1.20.4以上が必要

4. **具体的なエラーについて起動ログを確認**

5. **リカバリーを試す：**
   ```
   /cm fukugen
   ```

## YAMLエラー

**症状：** YAMLパースに関するエラー。

**よくある問題：**

1. **不正なインデント：**
   ```yaml
   # 間違い
   widgets:
   my_widget:
     type: IMAGE

   # 正しい
   widgets:
     my_widget:
       type: IMAGE
   ```

2. **特殊な値の周りにクォートがない：**
   ```yaml
   # 間違い - &は特殊な意味を持つ
   title: &bHello

   # 正しい
   title: "&bHello"
   ```

3. **不正なリスト形式：**
   ```yaml
   # 間違い
   events:
     on_cursor_click:
       action: sound

   # 正しい
   events:
     on_cursor_click:
       - action: sound
   ```

## ヘルプを得る

問題が解決しない場合：

1. デバッグモードを有効にしてコンソール出力を確認
2. GitHub issuesで既知の問題を確認
3. 新しいissueを作成する際は以下を含める：
   - サーバーバージョン
   - プラグインバージョン
   - コンソールログ
   - 設定ファイル（機密データは除去）
