# Внутрішньоігровий редактор

CraftMenu включає потужний візуальний редактор, який дозволяє налаштовувати меню безпосередньо через GUI інвентарю, без ручного редагування YAML файлів.

## Початок роботи

### Відкриття редактора

```
/cm redaktor              # Відкрити головний хаб редактора
/cm redaktor <menu>       # Редагувати конкретне меню напряму
```

**Необхідні права:** `craftmenu.admin` або `craftmenu.edit`

### Навігація в редакторі

Редактор використовує **стекову систему навігації**:
- **Лівий клік** по предметах для входу в підменю або редагування значень
- **Правий клік** для додаткових дій (попередній перегляд, тест)
- **Shift + Лівий клік** для видалення елементів (з підтвердженням)
- **Стрілка** (кнопка назад) для повернення до попереднього меню
- **Закриття інвентарю** або клік зовні для виходу

---

## Головне меню редактора

При виконанні `/cm redaktor` ви побачите головний хаб редактора з наступними опціями:

| Елемент | Опис |
|---------|------|
| **Список меню** | Перегляд і редагування всіх завантажених меню |
| **Браузер зображень** | Перегляд усіх доступних зображень |
| **Браузер звуків** | Перегляд усіх доступних звуків |
| **Конфігурація** | Глобальна конфігурація плагіна |

---

## Редагування меню

### Список меню

Показує всі меню у вашій папці `menus/`. Клікніть на меню, щоб відкрити його редактор.

- **Лівий клік**: Редагувати меню
- **Shift + Лівий клік**: Видалити меню (з підтвердженням)
- **Створити нове**: Додати нове меню у вашому поточному місцезнаходженні

### Хаб дій меню

Після вибору меню ви побачите головний редактор меню з наступними розділами:

| Розділ | Опис |
|--------|------|
| **Властивості** | Основні налаштування (ім'я, заголовок, головне меню, автовідкриття) |
| **Місцезнаходження** | Позиція у світі та обертання |
| **Макет** | Конфігурація сітки |
| **Гарячі клавіші** | Клавіатурні скорочення |
| **Видимість** | Налаштування приховування гравців/мобів/предметів |
| **Додатково** | Чутливість курсору, блокування камери, межі |
| **Віджети** | Редагування віджетів у цьому меню |

---

## Властивості меню

Редагування базової інформації меню:

| Властивість | Опис |
|-------------|------|
| **Ім'я** | Ідентифікатор меню (використовується в командах) |
| **Заголовок** | Відображуваний заголовок (підтримує & кольорові коди) |
| **Опис** | Необов'язковий опис |
| **Головне меню** | Позначити як основне меню |
| **Відкрити при вході** | Автовідкриття при вході гравця на сервер |
| **Відкрити при телепорті** | Автовідкриття при телепортації гравця до цього світу |
| **Світ** | Світ, у якому існує меню |

### Редагування текстових значень

При кліку на текстову властивість:
1. Інвентар закривається
2. У чаті з'являється запит
3. Введіть нове значення в чат
4. Натисніть Enter для підтвердження (або напишіть `cancel` для скасування)

---

## Місцезнаходження меню

Налаштування місця появи меню у світі:

| Властивість | Опис |
|-------------|------|
| **Світ** | Вибір з доступних світів |
| **X / Y / Z** | Координати (клікніть для редагування через чат) |
| **Yaw** | Горизонтальне обертання (-180 до 180) |
| **Pitch** | Вертикальне обертання (-90 до 90) |
| **Встановити поточну** | Використати вашу поточну позицію/обертання |

---

## Макет меню (Сітка)

Налаштування позиціонування віджетів на основі сітки:

| Властивість | Опис |
|-------------|------|
| **Увімкнено** | Перемикання макету сітки увімк/вимк |
| **Стовпці** | Кількість стовпців сітки |
| **Рядки** | Кількість рядків сітки |
| **Відступ X / Y / Z** | Відстань між комірками |
| **Вирівнювання** | Вирівнювання сітки (CENTER, TOP_LEFT тощо) |

Коли макет сітки увімкнено, віджети використовують `grid-position: {row: X, col: Y}` замість ручних координат.

---

## Гарячі клавіші меню

Налаштування клавіатурних скорочень:

| Дія | Опис |
|-----|------|
| **Додати гарячу клавішу** | Створити нове клавіатурне скорочення |
| **Редагувати гарячу клавішу** | Змінити існуючу гарячу клавішу |
| **Видалити гарячу клавішу** | Видалити гарячу клавішу |

### Властивості гарячих клавіш

- **Клавіша**: Клавіша або комбінація (напр., `SHIFT`, `CTRL+E`, `F`)
- **Дія**: `activate`, `toggle` або `close`
- **Віджет**: Ім'я цільового віджета (для activate/toggle)

---

## Видимість меню

Керування видимістю при відкритому меню:

| Властивість | Опис |
|-------------|------|
| **Приховати гравців** | Приховати інших гравців з виду |
| **Приховати мобів** | Приховати всіх мобів |
| **Приховати предмети** | Приховати предмети на землі |
| **Білий список** | Гравці, які залишаються видимими (редагувати список) |

---

## Розширені налаштування

Тонке налаштування поведінки меню:

| Властивість | Опис |
|-------------|------|
| **Чутливість курсору** | Швидкість руху миші (0.1 - 5.0) |
| **Макс. зміщення Yaw** | Горизонтальна межа курсору (градуси) |
| **Макс. зміщення Pitch** | Вертикальна межа курсору (градуси) |
| **Блокування камери увімкнено** | Заблокувати камеру гравця при відкритому меню |
| **Сила блокування камери** | Наскільки сильно заблокована камера (0.0 - 1.0) |
| **Звук межі** | Звук при досягненні курсором межі |
| **Гучність/Висота межі** | Властивості звуку |
| **Повідомлення межі** | Повідомлення, що показується біля межі |

---

## Редагування віджетів

### Список віджетів

Показує всі віджети в поточному меню:

- **Лівий клік**: Редагувати віджет
- **Shift + Лівий клік**: Видалити віджет
- **Створити новий**: Додати новий віджет

### Хаб редактора віджетів

Кожен віджет має наступні редаговані розділи:

| Розділ | Опис |
|--------|------|
| **Тип** | IMAGE, TEXT або CURSOR |
| **Трансформація** | Позиція, розмір, обертання |
| **Візуальні стани** | Зовнішній вигляд normal, hover, pressed, disabled |
| **Колізія** | Конфігурація області зіткнень |
| **Події** | Події взаємодії та дії |
| **[Залежить від типу]** | Додаткові опції залежно від типу віджета |

---

## Редактор трансформації

Налаштування позиціонування та розмірів віджета:

### Позиція
- **X**: Горизонтальна позиція
- **Y**: Вертикальна позиція
- **Z**: Глибина

### Розмір
- **X**: Масштаб ширини
- **Y**: Масштаб висоти
- **Z**: Масштаб глибини

### Обертання
- **Pitch**: Обертання вгору/вниз
- **Yaw**: Обертання вліво/вправо
- **Roll**: Нахил

**Порада**: Клікніть на будь-яке значення для редагування через чат.

---

## Візуальні стани

Віджети можуть мати різний зовнішній вигляд для різних станів:

| Стан | Коли застосовується |
|------|---------------------|
| **normal** | Стан за замовчуванням |
| **hover** | Курсор над віджетом |
| **pressed** | Віджет натискається |
| **disabled** | Віджет неактивний |
| **Користувацький** | Будь-яке користувацьке ім'я стану |

### Редактор візуального стану

Кожен стан має:

| Властивість | Опис |
|-------------|------|
| **Тип** | `image`, `text` або `unicode` |
| **Значення** | Шлях до зображення, текстовий вміст або unicode символ |
| **Перевизначення** | Необов'язкові перевизначення трансформації/колізії/розміру тексту |

---

## Редактор колізії

Налаштування клікабельної області віджета:

| Властивість | Опис |
|-------------|------|
| **Увімкнена** | Перемикання виявлення колізій |
| **Позиція X/Y/Z** | Зміщення центру області колізії |
| **Розмір X/Y/Z** | Розміри області колізії |
| **Зміщення X/Y/Z** | Додаткове зміщення |

**Порада**: Використовуйте `/cm nalahodzhennia particles` для візуалізації областей колізії в грі.

---

## Редактор подій

### Типи подій

| Подія | Тригер |
|-------|--------|
| **on_menu_open** | Коли меню відкривається |
| **on_cursor_hover** | Коли курсор входить у віджет |
| **on_cursor_hover_exit** | Коли курсор покидає віджет |
| **on_cursor_click** | Коли віджет клікнуто |

### Список дій

Кожна подія містить список дій, які виконуються по порядку:

- **Лівий клік**: Редагувати дію
- **Shift + Лівий клік**: Видалити дію
- **Додати дію**: Створити нову дію
- **Змінити порядок**: Перетягніть для зміни порядку виконання

---

## Редактори дій

Кожен тип дії має спеціалізований редактор:

### Дія анімації

| Властивість | Опис |
|-------------|------|
| **Ефект** | Тип анімації (rotate, scale, bounce тощо) |
| **Тривалість** | Тривалість анімації в мілісекундах |
| **Масштаб X/Y/Z** | Множники масштабу (для анімацій масштабування) |
| **Інтенсивність** | Сила ефекту (0.1 - 5.0) |
| **Згладжування** | Функція часу (linear, ease_in, ease_out тощо) |
| **Пріоритет** | Блокувати взаємодії під час анімації |

### Дія звуку

| Властивість | Опис |
|-------------|------|
| **Файл** | Шлях до звуку (minecraft:... або користувацький шлях) |
| **Гучність** | Гучність звуку (0.0 - 1.0) |
| **Висота** | Висота звуку (0.5 - 2.0) |

**Огляд**: Клікніть, щоб відкрити браузер звуків і вибрати звук.

### Дія команди

| Властивість | Опис |
|-------------|------|
| **Команда** | Команда для виконання (зі спеціальними командами) |
| **Затримка** | Затримка в мілісекундах перед виконанням |

**Спеціальні команди:**
- `[TELEPORT] world x y z yaw pitch`
- `[MESSAGE] &aВаше повідомлення тут`
- `[CLOSE]`
- `[PLAY_MUSIC] path/file.ogg`
- `[STOP_MUSIC]`
- `[OPEN_URL] https://...`
- `[PLAYER] /command`
- `[CONSOLE] /command`

### Дія стану

| Властивість | Опис |
|-------------|------|
| **Тип дії** | `toggle_state` або `set_state` |
| **Стани** | Список станів для перемикання (toggle_state) |
| **Стан** | Ім'я цільового стану (set_state) |

### Дія зміни зовнішнього вигляду

| Властивість | Опис |
|-------------|------|
| **До** | Ім'я цільового візуального стану |

### Дія віджета

| Властивість | Опис |
|-------------|------|
| **Дія** | `hide_widget`, `show_widget` тощо |
| **Віджет** | Ім'я цільового віджета |

### Дія ефекту

| Властивість | Опис |
|-------------|------|
| **Ефект** | Тип ефекту для застосування |
| **Параметри** | Параметри, специфічні для ефекту |

### Дія зупинки анімації

| Властивість | Опис |
|-------------|------|
| **Тип анімації** | Яку анімацію зупинити |

### Дія зупинки ефекту

| Властивість | Опис |
|-------------|------|
| **Тип ефекту** | Який ефект зупинити |

### Дія встановлення базового стану

| Властивість | Опис |
|-------------|------|
| **Стан** | Новий базовий стан для віджета |

---

## Браузери ресурсів

### Браузер зображень

Перегляд усіх зображень у папці `images/`:

- **Пагінація**: Навігація по сторінках зображень
- **Попередній перегляд**: Перегляд шляху до зображення та деталей
- **Вибір**: Клікніть для використання в поточному контексті

Зображення організовані по папках (напр., `template/button.png`).

### Браузер звуків

Перегляд усіх звуків у папці `sounds/` плюс вбудовані звуки Minecraft:

- **Користувацькі звуки**: Ваші .ogg файли з `sounds/`
- **Звуки Minecraft**: Вбудовані звуки (minecraft:ui.button.click тощо)
- **Вибір**: Клікніть для використання в поточному контексті

---

## Поради та найкращі практики

### Поради щодо робочого процесу

1. **Почніть з властивостей**: Спочатку налаштуйте ім'я, заголовок та місцезнаходження
2. **Додайте віджети**: Створіть віджети з базовими трансформаціями
3. **Налаштуйте візуали**: Встановіть стани normal та hover
4. **Додайте колізію**: Увімкніть і налаштуйте розмір областей колізії
5. **Додайте події**: Налаштуйте звуки наведення та дії кліків
6. **Тестуйте часто**: Використовуйте `/cm vidkryty <menu>` для тестування змін

### Клавіатурні скорочення

| Скорочення | Дія |
|------------|-----|
| **Escape** | Закрити редактор |
| **Цифрові клавіші (1-9)** | Швидкий вибір слоту |

### Часті проблеми

**Зміни не відображаються:**
- Виконайте `/cm perezavantazhyty` після внесення змін
- Переконайтеся, що ви натиснули "Зберегти" в редакторі

**Колізія не виявляється:**
- Перевірте, що колізія увімкнена
- Переконайтеся, що розмір колізії достатньо великий
- Використовуйте `/cm nalahodzhennia particles` для візуалізації

**Зображення не відображаються:**
- Виконайте `/cm paket` для регенерації ресурс-паку
- Переконайтеся, що зображення знаходиться в підпапці (напр., `images/mymenu/`)
- Застосуйте ресурс-пак на клієнті

---

## Дивіться також

- [Довідник команд](commands.md)
- [Створення меню](menu-creation.md)
- [Типи віджетів](widgets.md)
- [Система подій](events.md)
- [Анімації](animations.md)
